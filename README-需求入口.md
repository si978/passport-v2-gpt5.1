# Passport 统一认证中心 - 需求文档入口说明

> 本文件用于给项目成员提供一个**统一的需求入口导航**，避免在多份文档之间迷路。当前所有开发 / 测试 / 运维工作，请以标记为「唯一权威需求文档」的 PRD 为准，其余文档均为支撑或历史资料。

---

## 1. 唯一权威需求文档（SSoT）

- **《passport-统一认证中心-PRD-草稿.md》**  
  - 标题：`Passport 统一认证中心 - PRD（V1 多视图对齐版）`  
  - 版本号：`v1.1`  
  - 文档地位：项目开发 / 测试 / 运维的**唯一权威需求文档 / 单一事实源（SSoT）**。  
  - 说明：
    - 所有功能、业务规则（BR）、流程（FL）、数据模型（DM）、接口（API）、非功能需求（NFR）、风险与验收标准，均以本 PRD 为最终依据；
    - 如其它任何文档（包括视图文档、历史需求、审查记录等）与本 PRD 存在冲突，一律以本 PRD 为准。

> 建议：日常查看需求时，**优先直接打开这份 PRD**，其余文档视为补充说明或追溯材料。

---

## 2. 决策记录文档（Q / C 层）

这两份文档记录了「为什么 PRD 会这么写」，是追溯决策过程的主要入口。

1. **《passport-统一认证中心-PRD-审查与决策汇总-已决策.md》**  
   - 作用：记录 **Q-01 ～ Q-19**（产品 / 业务层）的问题背景、可选方案、最终决策，以及在主 PRD 中的落点；
   - 用途：当你对某一条业务规则或流程的设计有疑问时，可按 Q-xx 查找当初的讨论与取舍；
   - 注意：如与主 PRD 存在不一致，以主 PRD 为准。

2. **《passport-统一认证中心-多视图冲突与决策清单-已决策.md》**  
   - 作用：记录 **C-01 ～ C-07**（工程 / 架构层）在多视图审查中暴露的冲突与最终决策；
   - 用途：当多端（前端 / 壳层 / 原生 / 后端 / QA / 架构）对实现细节有疑问时，按 C-xx 查找多视角观点与最后定案；
   - 注意：最终行为以本 PRD 对应章节 + PRD 第 19 章为准，C 文档是决策过程与索引。

---

## 3. 工程视图文档（按角色扩展 PRD）

> 这些文档都是**基于主 PRD v1.1**的工程视角说明，用来帮助各端落地实现和测试。

- 《passport-统一认证中心-视图1-Web前端工程视图.md》  
  前端视角：页面结构、表单校验、错误码映射、状态管理等。

- 《passport-统一认证中心-视图2-客户端壳层工程视图.md》  
  壳层视角：应用生命周期、IPC、`session.dat` 读写与 SSO 启动策略等。

- 《passport-统一认证中心-视图3-原生模块工程视图.md》  
  原生视角：DPAPI 封装、本地文件 IO、对壳层暴露的接口与错误码。

- 《passport-统一认证中心-视图4-后端服务工程视图.md》  
  后端视角：实体 / API / 状态机 / 幂等性 / Redis 结构等。

- 《passport-统一认证中心-视图5-测试工程视图-QA.md》  
  测试视角：基于 FL-01～FL-05 的正向 / 反向 / 异常场景与缺口清单。

- 《passport-统一认证中心-视图6-架构与产品合理性视图.md》  
  架构视角：性能、安全、HA、迁移、网吧模式等跨职能关注点，及其与 C-xx 的关系。

> 说明：所有视图文档在头部都已声明：如与主 PRD 不一致，应一律以主 PRD 为准。

---

## 4. 会话整理与历史快照

- **《passport-统一认证中心-会话关键内容整理-开发入口.md》**  
  - 作用：**进入开发阶段的入口导航文档**，告诉你现在应该优先阅读哪些需求 / 决策文档，以及从开发视角需要重点关注的分层职责、关键 BR/FL/ERR 和 Q/C 决策；
  - 适用范围：PRD v1.1（V1 多视图对齐版），配合 Q/C 文档和各工程视图使用。

- **《passport-统一认证中心-会话关键内容整理.md》**  
  - 作用：v1.1 多视图审查收敛后的**详细会话整理**，完整梳理 PRD v0.1 → v1.0 → v1.1 的演进、Q-xx / C-xx 与六个工程视图之间的关系；
  - 用途：在需要深入理解历史讨论背景、多角色视角与所有决策脉络时参考。

- **《passport-统一认证中心-会话关键内容整理-历史v1.md》**  
  - 作用：仅作为 PRD v1.0（只到 Q-xx、未合入 C-xx）阶段的历史快照；
  - 注意：当前开发不再参考此文件，查看历史时如与主 PRD v1.1 不一致，以主 PRD v1.1 为准。

---

## 5. 原始需求文档

- **《passport -PRD.md》**  
  - 定位：最初的「passport统一认证中心 - 需求文档」导出版本，内容零散，包含早期表格与说明；
  - 当前用途：仅供回溯“最初想法”，避免信息丢失；  
  - 开发规范：**绝对不要**直接以此文档为开发 / 测试依据，如与主 PRD v1.1 有差异，一律以主 PRD 为准。

---

## 6. 简要使用建议

1. **要查当前需求：** 直接打开《passport-统一认证中心-PRD-草稿.md》（V1 多视图对齐版）。
2. **要追溯为什么这么设计：**
   - 产品 / 业务口径 → 查《PRD-审查与决策汇总-已决策》（Q-xx）；
   - 工程 / 架构口径 → 查《多视图冲突与决策清单-已决策》（C-xx）。
3. **要按角色落地实现 / 测试：** 结合对应的工程视图文档（前端 / 壳层 / 原生 / 后端 / QA / 架构）。
4. **要整体理解项目与文档关系：** 先读《passport-统一认证中心-会话关键内容整理.md》，再进入主 PRD 与视图文档。
