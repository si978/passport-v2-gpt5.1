下面这一份就是你要的「**从 P0 到 P1 都能用的需求文档模板**」——

- P0：PM 只有想法、要先写一版“像样的 PRD”时，用里头标了 **⭐P0 必填** 的部分

- P1：要升级成“人和 AI 都能看懂的结构化规格”时，就继续补全里头标了 **◆P1 增强** 的部分

你可以直接当做 Markdown 模板，用的时候删掉说明文字就行。

---

## 0. 文档元信息

> ⭐P0 必填 —— 把这页写清楚，后面的人才知道这是啥。

- **文档名称**：

- **产品/项目名称**：

- **版本号**：v0.1 / v1.0

- **撰写人**：

- **评审人**：

- **创建日期**：

- **最近更新**：

**变更记录**

| 版本   | 日期  | 作者  | 变更说明 |
| ---- | --- | --- | ---- |
| v0.1 |     |     | 初稿   |
|      |     |     |      |

---

## 1. 背景 & 目标（Why）

> ⭐P0 必填 —— 决定这个东西“值不值得做”。

### 1.1 业务背景

> 当前业务处于什么阶段？有哪些现状/痛点？  
> 建议 3–6 条 bullet，尽量贴事实/数据。

- …

- …

### 1.2 问题陈述

> 这次需求是要解决哪些**具体问题**？  
> 尝试用“谁在什么场景下遇到什么困扰”的形式。

- …

- …

### 1.3 本版本目标（Goals）

> 只写当前版本，不要写十年愿景。  
> 尽量可以“上线后 1～2 个月内验证”。

- G-01：…

- G-02：…

### 1.4 不在本版本范围的目标（Non-Goals）

> ⭐P0 强烈推荐写 —— 防止边做边加。

- NG-01：本版不解决…

- NG-02：本版不考虑…

---

## 2. 范围 & 约束（Scope & Constraints）

### 2.1 In Scope（在范围内）

> 列出本版要覆盖的用户群、场景、平台等。

- 用户群：

- 场景：

- 平台/终端：

### 2.2 Out of Scope（不在范围内）

> 再强调一次不做的事情。

- …

### 2.3 前置假设 & 依赖

> ⭐P0 建议写清楚，后面很多争议其实是因为假设不同。

- 已有系统/数据的前提（例如“已有登录系统可用”）

- 依赖其他团队/第三方的事项

---

## 3. 角色与术语（Actors & Concepts）

> ◆P1 增强 —— 这里是未来生成 US/BR/接口时的“字典”。  
> 约定用 **AC-xx** 做 ID，方便后续引用。

### 3.1 角色列表（Actors）

| ID    | 名称    | 描述 / 权限说明  |
| ----- | ----- | ---------- |
| AC-01 | C 端用户 | 例：网吧用户、玩家… |
| AC-02 | 管理员   | …          |
| AC-03 | 第三方应用 | …          |

### 3.2 核心术语（Concepts / Entities）

| ID    | 名称  | 定义 / 说明 |
| ----- | --- | ------- |
| AC-10 | xx  | …       |
| AC-11 | xx  | …       |

---

## 4. 用户故事（User Stories，US）

> ⭐P0 可以先写“场景描述”；  
> ◆P1 再给每条分配 **US-xx** 编号 + 结构化描述。

**用户故事通用模板：**

```text
US-xx：一句话标题（谁在什么场景做什么，得到什么结果）

- 角色（Actor）：AC-??
- 场景（When）：
- 前置条件（Given）：
- 触发（When）：用户做了什么操作？
- 结果（Then）：系统应给出什么可感知结果？
- 备注：其他说明
```

### 4.1 核心用户故事列表

> 建议 5～10 条覆盖主要功能。

- US-01 …

- US-02 …

- …

---

## 5. 业务规则（Business Rules，BR）

> ◆P1 核心 —— “怎么做”的抽象规则。  
> 建议所有“如果…那么…”的句子都沉淀成 BR。

**业务规则通用模板：**

```text
BR-xx：一句话标题

- 条件（When）：…
- 结果（Then）：…
- 示例：
  - 输入：…
  - 输出：…
- 备注：…
```

### 5.1 规则列表

| ID    | 标题       | 简要说明 |
| ----- | -------- | ---- |
| BR-01 | 手机号格式规则  | …    |
| BR-02 | 验证码有效期规则 | …    |

> 下方可逐条展开：

#### BR-01 手机号格式规则

- 条件：用户输入手机号

- 结果：必须为 11 位数字，否则返回错误…

- 示例：…

---

## 6. 流程与状态（Flows & States）

> ◆P1 增强 —— 方便后续 AI 生成时序图、状态机。

### 6.1 业务流程（FL）

> 每个关键流程用 **FL-xx** 表示，推荐至少覆盖：登录/注册、关键业务操作、撤销/退款等。

**流程模板：**

```text
FL-xx：流程名称

- 适用范围：适用于哪些角色/场景？
- 关联 US：US-??
- 步骤：
  1. …
  2. …
  3. …
- 涉及状态变更：ST-??
- 涉及规则：BR-??, BR-??
```

### 6.2 状态机（ST）

> 对有“生命周期”的对象（订单、会话、任务等）定义状态枚举。

**状态机模板：**

```text
状态对象：例如“订单”

ST-01：CREATED    // 已创建
ST-02：PAID       // 已支付
ST-03：CANCELLED  // 已取消

允许的状态流转：
- ST-01 → ST-02 （满足 BR-xx）
- ST-01 → ST-03 （满足 BR-yy）
不允许：
- ST-02 → ST-01
```

---

## 7. 界面与交互（UI / UX）※如有

> ⭐P0 可简单用文字描述；  
> ◆P1 可补 Sketch/Figma 链接或草图。

### 7.1 关键页面/界面列表

- 页面 1：…（用途 / 入口 / 主要元素）

- 页面 2：…

### 7.2 交互细节

> 包括文案、校验提示、错误提示、Loading/空态、重要动画等。

---

## 8. 数据模型（Data Model，DM）

> ◆P1 核心 —— 是 AI 生成代码的重要输入。

### 8.1 主要实体一览

| ID    | 实体名     | 说明  |
| ----- | ------- | --- |
| DM-01 | User    | 用户  |
| DM-02 | Session | 会话  |
| DM-03 | …       |     |

### 8.2 实体字段定义（可用表格或 JSON Schema）

**示例：表格形式**

实体：User（DM-01）

| 字段名        | 类型       | 必填  | 约束/枚举      | 说明     |
| ---------- | -------- | --- | ---------- | ------ |
| id         | string   | 是   | GUID 格式，唯一 | 用户唯一标识 |
| phone      | string   | 是   | 11位手机号     | 登录手机号  |
| status     | int      | 是   | 1=正常，0=冻结  | 用户状态   |
| created_at | datetime | 是   |            | 创建时间   |

**示例：JSON Schema 风格（给 AI 用）**

```json
{
  "$id": "User",
  "type": "object",
  "required": ["id", "phone", "status"],
  "properties": {
    "id": { "type": "string", "pattern": "^[0-9]{20}$" },
    "phone": { "type": "string", "pattern": "^[0-9]{11}$" },
    "status": { "type": "integer", "enum": [0, 1] },
    "created_at": { "type": "string", "format": "date-time" }
  }
}
```

---

## 9. 接口 / API 概览（API）

> ◆P1 增强 —— 不一定写到“开发文档”级别，但至少有概要。

### 9.1 接口列表

| ID     | Method | Path            | 说明    |
| ------ | ------ | --------------- | ----- |
| API-01 | POST   | /auth/send-code | 发送验证码 |
| API-02 | POST   | /auth/login     | 登录    |
| API-03 | POST   | /auth/logout    | 退出登录  |

### 9.2 接口概要说明模板

```text
API-xx：接口名称

- Method: GET/POST/PUT/DELETE
- Path: /path/xxx
- 调用方：AC-??（谁会调用）
- 功能摘要：…
- 请求参数：
  - Query: …
  - Body: 字段&说明
- 响应：
  - 成功：字段&说明
  - 失败：引用错误码 ERR-xx
- 关联 US：US-??
- 关联 BR：BR-??
```

---

## 10. 非功能需求（Non-Functional Requirements，NFR）

> ◆P1 建议至少写到“最小可用”程度。

可以按大类分：

### 10.1 性能（Performance）

- QPS 预期：

- 响应时间目标（例如 P95 ≤ 200ms）：

- 高峰场景：

### 10.2 可用性 / 稳定性

- SLA 目标：

- 容错/降级策略（简述即可）

### 10.3 安全（Security）

- 认证/授权要求：

- 数据加密/脱敏：

- 敏感操作审计：

### 10.4 可维护性 / 可扩展性

- 配置管理要求：

- 日志规范：

---

## 11. 权限、角色与安全控制

> 可以和 NFR 合并，也可以单独列出。

- 哪些角色可以访问哪些功能/接口？

- 是否有数据级权限（只能看自己的、自己部门的等）？

---

## 12. 日志、监控与告警

> 为 P5 测试 & 上线打基础。

### 12.1 日志

- 必须打日志的关键行为（登录、下单等）

- 脱敏规则（手机号、Token 等）

### 12.2 监控指标

- 指标列表（如登录成功率、错误率、接口耗时）

### 12.3 告警规则（概要）

- 条件：如 5 分钟内错误率 > X%

- 告警渠道：

---

## 13. 异常处理 & 错误码（ERR）

> 简版即可，详细可以放技术文档。

### 13.1 错误码表

| 错误码    | 名称           | 场景 / 说明        |
| ------ | ------------ | -------------- |
| ERR-01 | InvalidInput | 参数格式错误         |
| ERR-02 | Unauthorized | 未登录 / Token 失效 |
| ERR-03 | RateLimited  | 超出频率限制         |

---

## 14. 兼容性 & 迁移（如有）

- 需要兼容哪些旧系统 / 旧版本行为？

- 数据迁移 / 用户迁移的大致策略？

---

## 15. 依赖 & 外部接口

- 依赖的外部系统/服务/团队列表

- 哪些是“没有就完全干不了”的强依赖？

---

## 16. 风险与假设（RISK & ASSUMPTIONS）

> ⭐P0 写粗略；◆P3 会进一步细化。

### 16.1 已知风险（业务+技术）

| ID      | 描述      | 影响  | 大致概率 |
| ------- | ------- | --- | ---- |
| RISK-01 | 短信通道不稳定 | 高   | 中    |
| RISK-02 | …       |     |      |

### 16.2 关键假设

- 假设-01：…

- 假设-02：…

---

## 17. 验收标准（Acceptance Criteria）

> ◆P1 核心 —— 方便 QA 和 AI 生成测试。

### 17.1 按 US 的验收标准（AC-US-xx-yy）

**模板：**

```text
AC-US-xx-yy：

当【前置条件】，
当用户【执行某操作】，
系统应该在【时间范围】内【给出结果】，
并且【数据/状态变化】满足【BR-??/DM-??】。
```

举例（登录成功）：

- AC-US-01-01：
  
  - 当手机号格式正确且验证码在有效期内，用户输入验证码点击登录时，系统应在 1 秒内返回登录成功，并在会话存储中写入一条有效会话记录。

---

## 18. 发布 & 里程碑（高层版本计划）

> 可以只写一句话版本：MVP 做什么，下个版本做什么。

- V1 / MVP：
  
  - 对应 US：US-01, US-02, …

- V2：
  
  - 增强点：…

---
