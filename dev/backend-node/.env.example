# HTTP server
PORT=3000

# Runtime environment
# NODE_ENV=production

# Reverse proxy
# When running behind Nginx/SLB, enable Express trust proxy so req.ip uses X-Forwarded-For.
TRUST_PROXY=1

# Metrics
# - In production, `/api/metrics` is restricted to private IPs unless you set METRICS_TOKEN.
# - When METRICS_TOKEN is set, call with:
#   Authorization: Bearer <token>
#   (or x-metrics-token: <token>)
METRICS_TOKEN=

# PostgreSQL database
DB_HOST=localhost
DB_PORT=5432
DB_USER=passport
DB_PASSWORD=passport
DB_NAME=passport

# Redis (single instance)
REDIS_URL=redis://localhost:6379

# Redis Sentinel (optional, overrides REDIS_URL when set)
# Example: REDIS_SENTINELS=10.0.0.1:26379,10.0.0.2:26379,10.0.0.3:26379
REDIS_SENTINELS=
REDIS_MASTER_NAME=mymaster

# Admin authorization
# RolesGuard mode:
# - strict (default): authorize by server-side session roles (req.user.roles)
# - legacy: allow any admin role for endpoints protected by @Roles (emergency rollback)
ADMIN_AUTH_MODE=strict

# Admin portal isolation
# - Admin endpoints `/api/admin/*` require app_id to match ADMIN_APP_ID (default: admin).
# - Recommended: admin frontend uses VITE_APP_ID=admin and is served on a separate origin/port.
ADMIN_APP_ID=admin

# Admin roles (optional)
# - Default behavior: any admin userType (ADMIN_USER_TYPES / "admin") gets OPERATOR role.
# - To use least privilege, map userType -> roles with ADMIN_ROLE_MAP:
#   ADMIN_ROLE_MAP=9=OPERATOR,8=SUPPORT,7=TECH
#   (roles are separated by `|` when multiple: 9=OPERATOR|SUPPORT)
ADMIN_ROLE_MAP=

# Swagger
# - By default, enabled only in non-production env.
# - Set ENABLE_SWAGGER=1 to force enable, or 0 to force disable.
ENABLE_SWAGGER=0

# SMS gateway (optional, when unset ConsoleSmsGateway will be used)
SMS_GATEWAY_URL=
SMS_GATEWAY_KEY=

# Aliyun Number Authentication SMS (Dypnsapi)
# When all of the following are set, AliyunSmsGateway will be used
ALIYUN_ACCESS_KEY_ID=
ALIYUN_ACCESS_KEY_SECRET=
ALIYUN_SMS_SIGN_NAME=
ALIYUN_SMS_TEMPLATE_CODE=
