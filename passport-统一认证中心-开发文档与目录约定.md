# Passport 统一认证中心 - 开发文档与目录约定（全局指令）

> 目的：统一约定本项目中“开发计划”和“开发/实现相关文档”的存放位置与命名规则，便于后续任何自动生成（例如由 Droid 生成新文档）在**读取本文件后即可自动决定：生成什么 / 存在哪里 / 用什么命名前缀**。

本文件本身为**全局指令文档**，后续如需调整目录结构或命名规则，应优先更新本文件。

---

## 1. 顶层目录结构约定

当前项目根目录（`D:\droid\passport-v2-gpt5.1`）下的主要目录与角色如下：

```text
./
  passport-统一认证中心-PRD-*.md              # PRD 及审查/决策文档（SSoT + Q/C）
  passport-统一认证中心-视图*.md               # 6 个工程视图文档
  passport-统一认证中心-会话关键内容整理*.md    # 会话整理文档（历史/开发入口/TDD 版）
  passport-统一认证中心-*.md                  # 其他全局设计文档（TDD、性能、日志、DB、技术方案等）

  dev-plan/                                   # 【开发计划类文档专用目录】
  dev/                                        # 【实际开发代码与实现类文件目录】
```

约定：

- **根目录**：只放“全局级、跨迭代”的需求、决策、设计与会话整理类文档（PRD、Q/C、视图、TDD 方案、性能/监控/日志/DB/架构等）；
- **`dev-plan/`**：只放“开发计划 / 迭代计划类”Markdown 文档；
- **`dev/`**：只放“实际开发过程中产生的代码、配置、脚手架与实现相关文件”（按子目录划分模块）。

---

## 2. `dev-plan/` 目录约定（开发计划类文档）

### 2.1 存放内容

`dev-plan/` 目录用于存放所有**开发计划 / 迭代落地计划**类文档，包括但不限于：

- 总体开发计划：
  - `dev-plan/passport-统一认证中心-开发计划.md`
- 迭代级落地计划：
  - `dev-plan/passport-统一认证中心-迭代1-Cycle1-5-落地计划.md`
  - 后续可扩展为：
    - `dev-plan/passport-统一认证中心-迭代2-Cycle6-10-落地计划.md`
    - `dev-plan/passport-统一认证中心-迭代3-...md`
- 其他与实施计划直接相关的文档（如“里程碑规划”、“风险与缓冲计划”等）。

### 2.2 命名规则

- 必须以 `passport-统一认证中心-` 前缀开头；
- 开发计划总表：
  - 固定使用：`passport-统一认证中心-开发计划.md`；
- 迭代计划：
  - 推荐格式：`passport-统一认证中心-迭代<N>-CycleX-Y-落地计划.md`
    - `<N>`：迭代序号（1,2,3,...）；
    - `X-Y`：本迭代覆盖的 Cycle 范围（如 1-5, 6-10）。

### 2.3 Droid 生成指令（给未来的自动生成使用）

当未来某个 Droid 需要**生成新的开发计划文档**时，应遵循：

1. 如果是“整体开发计划”：
   - 目标路径：`dev-plan/passport-统一认证中心-开发计划.md`
   - 若文件已存在：应读取并在原有结构基础上更新，避免在根目录重新创建同名文件。
2. 如果是“迭代级落地计划”：
   - 目标路径示例：`dev-plan/passport-统一认证中心-迭代<N>-CycleX-Y-落地计划.md`
   - 若为新迭代：创建新文件；若为已有迭代：读取后进行增量更新。

---

## 3. `dev/` 目录约定（实际开发/实现类文件）

`dev/` 目录用于存放实际开发中的代码与实现文件，当前结构约定如下：

```text
dev/
  backend/   # 服务端实现相关代码（API、Service、Domain、Infra）
  frontend/  # Web 前端实现相关代码（页面、组件、状态管理）
  shell/     # 客户端壳层实现代码（刷新调度、IPC、本地状态）
  native/    # 原生模块代码（DPAPI、文件 IO、设备标识）
  tests/     # 工程级测试工具/脚本（非业务文档类）
```

约定：

- Droid 或人工在**进入实际编码实现**时，应将：
  - 后端代码放入 `dev/backend/`；
  - 前端代码放入 `dev/frontend/`；
  - 壳层代码放入 `dev/shell/`；
  - 原生模块相关代码放入 `dev/native/`；
  - 与工程相关的测试脚本/工具放入 `dev/tests/`；
- 不应在根目录或 `dev-plan/` 下存储源代码文件（如 `.ts/.js/.go/.java/.cs` 等）。

> 给未来 Droid 的指令：当你需要“生成实际开发代码文件”时，**优先将文件写入 `dev/` 子目录中合适的位置**，而不是根目录。

---

## 4. 根目录其他设计文档的约定

下列类型的设计/分析文档继续存放于项目根目录：

- 需求与决策相关：
  - `passport-统一认证中心-PRD-*.md`
  - `passport-统一认证中心-PRD-审查与决策汇总-已决策.md`
  - `passport-统一认证中心-多视图冲突与决策清单-已决策.md`
- 会话整理与入口类：
  - `passport-统一认证中心-会话关键内容整理*.md`
  - `README-需求入口.md`
- 设计与方案类：
  - `passport-统一认证中心-TDD适配分析.md`
  - `passport-统一认证中心-单元测试设计-TDD版.md`
  - `passport-统一认证中心-性能与监控设计方案.md`
  - `passport-统一认证中心-日志与审计设计.md`
  - `passport-统一认证中心-数据模型与数据库设计.md`
  - `passport-统一认证中心-技术方案与架构设计.md`
  - `passport-统一认证中心-迁移与高可用方案-草案.md`

> 给未来 Droid 的指令：当你需要“生成新的全局设计/分析类文档”（例如新的 TDD 策略、架构方案补充），**应存放在根目录**，并以 `passport-统一认证中心-` 为前缀命名。

---

## 5. 更新与演进

- 如未来需要：
  - 调整目录结构（例如将 `dev/backend` 进一步拆分为 `dev/backend/api` / `dev/backend/admin` 等）；
  - 增加新的文档类别（如 `ops/`、`scripts/`）；
- 应首先更新本文件中的约定，并在必要时在会话整理文档中做简要说明。

> 总之：**任何新的开发计划文档 → 放在 `dev-plan/`；任何新的实现代码/配置 → 放在 `dev/`；任何新的全局设计文档 → 放在根目录并以统一前缀命名。** 未来 Droid 在生成文件前只需读取本文件即可遵循上述规则。
